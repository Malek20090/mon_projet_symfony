<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Admin | Decide${% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ asset('css/style_1.css') }}">
    <link rel="stylesheet" href="{{ asset('css/dark-mode.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="admin-body">

<div class="admin-container" id="adminContainer">
    <button type="button" class="sidebar-toggle" id="sidebarToggle" aria-label="Open menu">
        <i class="fas fa-bars"></i>
    </button>
    <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

    <!-- SIDEBAR (même style que Transactions, Reports, Users) -->
    <aside class="sidebar" id="adminSidebar">
        <div class="sidebar-top">
            <div class="brand">
                Decide<span>$</span>
            </div>
        </div>

        <nav class="sidebar-nav">
            {% set _route = app.request.attributes.get('_route') ?? '' %}
            <a href="{{ path('app_user_index') }}"
               class="{{ _route starts with 'app_user' ? 'active' : '' }}">
                <i class="fas fa-users"></i> <span>Users</span>
            </a>

            <a href="{{ path('app_transaction_index') }}"
               class="{{ _route starts with 'app_transaction' ? 'active' : '' }}">
                <i class="fas fa-arrow-right-arrow-left"></i> <span>Transactions</span>
            </a>

            <a href="{{ path('admin_dashboard') }}"
               class="{{ 'admin_dashboard' in _route or 'admin_cours' in _route or 'admin_quiz' in _route ? 'active' : '' }}">
                <i class="fas fa-graduation-cap"></i> <span>Course & Quiz</span>
            </a>

            <a href="{{ path('admin_imprevus_list') }}"
               class="{{ 'admin_imprevus' in _route ? 'active' : '' }}">
                <i class="fas fa-exclamation-triangle"></i> <span>Unexpected Events</span>
            </a>

            <a href="{{ path('admin_casrelles_list') }}"
               class="{{ 'admin_casrelles' in _route ? 'active' : '' }}">
                <i class="fas fa-clipboard-check"></i> <span>Real Cases</span>
            </a>

            <a href="{{ path('app_revenue_index') }}"
               class="{{ _route starts with 'app_revenue' ? 'active' : '' }}">
                <i class="fas fa-sack-dollar"></i> <span>Revenues</span>
            </a>

            <a href="{{ path('app_expense_index') }}"
               class="{{ _route starts with 'app_expense' ? 'active' : '' }}">
                <i class="fas fa-credit-card"></i> <span>Expenses</span>
            </a>

            <a href="{{ path('app_reports') }}"
               class="{{ _route starts with 'app_reports' ? 'active' : '' }}">
                <i class="fas fa-chart-column"></i> <span>Reports</span>
            </a>

            <a href="{{ path('admin_investissements') }}"
               class="{{ _route starts with 'admin_investissements' ? 'active' : '' }}">
                <i class="fas fa-chart-line"></i> <span>Investments</span>
            </a>
           
            <a href="{{ path('admin_objectifs') }}"
               class="{{ _route starts with 'admin_objectifs' ? 'active' : '' }}">
                <i class="fas fa-bullseye"></i> <span>Objectives</span>
            </a>
           
           <a href="{{ path('admin_goals_admin_goals_index')
}}"
   class="{{ _route starts with 'admin_goals' ? 'active' : '' }}">
    <i class="fas fa-flag-checkered"></i> <span>Goals</span>
</a>

          
        </nav>

        <div class="sidebar-footer">
            <div class="admin-identity">
                <img src="{{ asset(app.user and app.user.image ? 'uploads/users/' ~ app.user.image : 'uploads/users/chat1.png') }}" alt="Admin profile" class="admin-identity-avatar">
                <div class="admin-identity-meta">
                    <div class="admin-identity-name">{{ app.user ? (app.user.nom ?: app.user.email) : 'Administrator' }}</div>
                    <div class="admin-identity-role">Admin Panel</div>
                </div>
            </div>
            <a href="{{ path('app_logout') }}">
                <i class="fas fa-sign-out-alt"></i> <span>Sign out</span>
            </a>
        </div>
    </aside>

    <!-- CONTENT -->
    <main class="content">
        {% block content %}{% endblock %}
        <!-- FOOTER ADMIN -->
        <footer class="admin-footer">
            <div class="admin-footer-inner">
                <span class="admin-footer-brand"><i class="fas fa-wallet me-1"></i> Decide$</span>
                <span class="admin-footer-copy">&copy; {{ "now"|date("Y") }} Decide$ – Admin. All rights reserved.</span>
                <a href="{{ path('admin_imprevus_list') }}" class="admin-footer-link">Unexpected Events</a>
                <a href="{{ path('app_logout') }}" class="admin-footer-link">Sign out</a>
            </div>
        </footer>
    </main>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ asset('js/theme-toggle.js') }}"></script>
<script>
    // Validation HTML5 pour tous les formulaires (back-office)
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            var forms = document.getElementsByTagName('form');
            Array.prototype.forEach.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>
<script>
    (function () {
        const container = document.getElementById('adminContainer');
        const toggle = document.getElementById('sidebarToggle');
        const backdrop = document.getElementById('sidebarBackdrop');
        const sidebarLinks = document.querySelectorAll('.sidebar-nav a, .sidebar-footer a');

        if (!container || !toggle || !backdrop) return;

        function closeSidebar() {
            container.classList.remove('sidebar-open');
        }

        function toggleSidebar() {
            container.classList.toggle('sidebar-open');
        }

        toggle.addEventListener('click', toggleSidebar);
        backdrop.addEventListener('click', closeSidebar);

        sidebarLinks.forEach((link) => {
            link.addEventListener('click', function () {
                if (window.innerWidth <= 1100) closeSidebar();
            });
        });

        window.addEventListener('resize', function () {
            if (window.innerWidth > 1100) closeSidebar();
        });
    })();
</script>
{% block javascripts %}{% endblock %}
</body>
</html>


